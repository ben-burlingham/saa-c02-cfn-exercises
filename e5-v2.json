{
  "Resources": {
    "HelloEip": {
      "Type": "AWS::EC2::EIP"
    },
    "HelloIgw": {
      "Type": "AWS::EC2::InternetGateway"
    },
    "HelloNgw": {
      "Type": "AWS::EC2::NatGateway",
      "Properties": {
         "AllocationId": { "Fn::GetAtt": ["HelloEip", "AllocationId"]},
         "SubnetId": { "Ref": "HelloSubnetPublic"},
         "Tags": [ {"Key": "Name", "Value": "Hello NGW" } ]
        }
    },
    "HelloRouteIgw": {
      "Type": "AWS::EC2::Route",
      "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "GatewayId": { "Ref": "HelloIgw" },
          "RouteTableId": { "Ref": "HelloRtIgw" }
        }
    },
    "HelloRouteNgw": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": { "Ref": "HelloNgw" },
        "RouteTableId": { "Ref": "HelloRtNgw" }
      }
    },
    "HelloRtIgw": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "Tags": [{ "Key": "Name", "Value": "Hello IGW RT" }],
        "VpcId": { "Ref": "HelloVpc" }
      }
    },
    "HelloRtNgw": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "Tags": [{ "Key": "Name", "Value": "Hello NGW RT" }],
        "VpcId": { "Ref": "HelloVpc" }
      }
    },
    "HelloRtIgwAssociate": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
          "RouteTableId": { "Ref": "HelloRtIgw" },
          "SubnetId": { "Ref": "HelloSubnetPublic" }
        }
    },
    "HelloRtNgwAssociate": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "RouteTableId": { "Ref": "HelloRtNgw" },
        "SubnetId": { "Ref": "HelloSubnetPrivate" }
      }
    },
    "HelloSubnetPrivate": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
          "AvailabilityZone": " us-east-1a",
          "CidrBlock": "10.16.1.0/24",
          "Tags": [{ "Key": "Name", "Value": "Hello Private Subnet" }],
          "VpcId": { "Ref": "HelloVpc" }
        }
    },
    "HelloSubnetPublic": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
          "AvailabilityZone": " us-east-1a",
          "CidrBlock": "10.16.0.0/24",
          "MapPublicIpOnLaunch": true,
          "Tags": [{ "Key": "Name", "Value": "Hello Public Subnet" }],
          "VpcId": { "Ref": "HelloVpc" }
        }
    },
    "HelloVpcAttach": {
      "Type": "AWS::EC2::VPCGatewayAttachment",
      "Properties": {
          "InternetGatewayId": { "Ref": "HelloIgw" },
          "VpcId": { "Ref": "HelloVpc" }
        }
    },
    "HelloVpc": {
      "Type": "AWS::EC2::VPC",
      "Properties": {
          "CidrBlock": "10.16.0.0/16",
          "EnableDnsHostnames": false,
          "EnableDnsSupport": false,
          "Tags": [{ "Key": "Name", "Value": "Hello VPC" }]
        }
    }
  }
}